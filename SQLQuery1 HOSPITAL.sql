create table PATIENT(

P_ID  INTEGER  PRIMARY KEY ,
P_NAME CHAR (20) ,
GENDER CHAR (20),
ADDRESS CHAR (20),
N_ID INT ,
PHONE_NUMBER INTEGER NOT NULL,

UNIQUE (PHONE_NUMBER),
BILL_ID  INTEGER,
) 
Alter table PATIENT
ADD CONSTRAINT FK_PATIENT 
  FOREIGN KEY (N_ID ) REFERENCES nurses ON DELETE CASCADE ;


  
  ALTER TABLE PATIENT
DROP CONSTRAINT FK_PATIENT_BILL;

ALTER TABLE PATIENT
DROP COLUMN BILL_ID;

INSERT INTO PATIENT VALUES 
(1, 'MOHMED', 'Male', 'Cairo', 1,'0111234567'),
(2, 'ALAA', 'Female', 'Alex',2,'0112234567'),
(3, 'RNA', 'Female', 'Delta',3 ,'0113234567');

 
SELECT *FROM PATIENT
 
 


CREATE TABLE DOCTOR (
D_ID INTEGER PRIMARY KEY ,
SPECIALLIZATION  CHAR (20),
f_NAME  CHAR (20),
L_NAME  CHAR (20),
PHONE_NUMBER INTEGER NOT NULL,
UNIQUE (PHONE_NUMBER),
GENDER CHAR (20),
ADDRESS CHAR (20),
H_ID INTEGER,
NUMBER INT ,
);
ALTER TABLE DOCTOR
--ADD CONSTRAINT FK_HOSPITAL
ADD FOREIGN KEY (H_ID) REFERENCES HOSPITAL(H_ID);

SELECT *FROM DOCTOR
EXEC sp_rename 'DOCTOR.ID', 'D_ID', 'COLUMN';
UPDATE  DOCTOR
SET D_ID =1

INSERT INTO DOCTOR (D_ID, SPECIALLIZATION, F_NAME, L_NAME, PHONE_NUMBER, GENDER, ADDRESS, H_ID)
VALUES 
(1, 'Cardiology', 'Ahmed', 'Hassan', 1234567890, 'Male', 'Cairo',1),
(2, 'Surgery', 'Mona', 'Ali', 1234567891, 'Female', 'Alex',2),
(3, 'Pediatrics', 'Khaled', 'Omar', 1234567892, 'Male', 'Delta',3);

EXEC sp_helpconstraint 'APPOINTMENT';
ALTER TABLE APPOINTMENT DROP CONSTRAINT FK__APPOINTMEN__D_ID__6477ECF3;
SELECT name, type_desc 
FROM sys.foreign_keys 
WHERE parent_object_id = OBJECT_ID('APPOINTMENT');
ALTER TABLE APPOINTMENT DROP CONSTRAINT FK__APPOINTMEN__D_ID__60A75C0F;
select *from DOCTOR 
SELECT D_ID FROM DOCTOR;

CREATE TABLE HOSPITAL(
ADDRESS CHAR (20),
H_ID INTEGER PRIMARY KEY ,
H_NAME CHAR (20) ,
D_ID INTEGER 
)
ALTER TABLE HOSPITAL
ADD D_ID INT;
ALTER TABLE HOSPITAL
ADD CONSTRAINT FK_HOSPITAL_DOCTOR
FOREIGN KEY (D_ID) REFERENCES DOCTOR(D_ID);
SELECT * FROM HOSPITAL WHERE H_ID IN (1, 2, 3);
INSERT INTO HOSPITAL VALUES 


('Main Street',1, 'Cairo Hospital'),
('Sea Road',2, 'Alex Hospital' ),
('Delta Street',3, 'Delta Hospital');

ALTER TABLE HOSPITAL
ADD D_ID INT;
ALTER TABLE HOSPITAL
DROP CONSTRAINT FK_HOSPITAL_DOCTOR;
ALTER TABLE HOSPITAL
DROP COLUMN D_ID;

UPDATE HOSPITAL
SET H_ID=10
WHERE H_NAME='Cairo Hospital'

SELECT *FROM HOSPITAL

CREATE TABLE nurses (
N_ID INTEGER PRIMARY KEY ,
N_NAME CHAR (20) ,
AGE INTEGER NOT NULL,
ADDRESS CHAR (20),
H_ID INTEGER ,

) 

ALTER TABLE nurses 
ADD CONSTRAINT FK_nurses
FOREIGN KEY (H_ID) REFERENCES HOSPITAL(H_ID);
select* from nurses
insert into nurses values 
(1,'asmaa',23,'cairo',10),
(2,'amany',24,'giza',11),
(3,'nader',25,'alex',12)


  select * from nurses






CREATE TABLE APPOINTMENT (
NUMBER INT PRIMARY KEY,
DATE date,
P_ID  INTEGER ,
 D_ID INT,

)
ALTER TABLE APPOINTMENT 
ADD CONSTRAINT FK_APPOINTMENT_P_ID
FOREIGN KEY (P_ID) REFERENCES PATIENT (P_ID);
SELECT *FROM APPOINTMENT

ALTER TABLE APPOINTMENT 
--ADD CONSTRAINT FK_DOCTOR_ID
ADD FOREIGN KEY (D_ID) REFERENCES DOCTOR  (D_ID);
insert  INTO APPOINTMENT VALUES (101,'2024-10-22',1,1),
( 102,'2024-11-10',2,2),
(103,'2024-12-10',3,3);
SELECT *FROM APPOINTMENT
DELETE FROM APPOINTMENT


--EXEC sp_rename 'APPOINTMENT.ID', 'D_ID', 'COLUMN';
--SELECT *FROM APPOINTMENT
ALTER TABLE APPOINTMENT
DROP CONSTRAINT FK_DOCTOR_APPOINTMENT;

CREATE TABLE ROOMS(
R_NO INT PRIMARY KEY,
R_TYPE VARCHAR(20),
CAPACITY VARCHAR(20),
NO_OFDAYS VARCHAR(20),
)
 INSERT INTO ROOMS VALUES 
 (5,'SINGLE',1,3),
 (6,'DOUBLE',2,5),
 (7,'MULTI',6,10);

SELECT *FROM ROOMS

CREATE TABLE BILL (
BILL_ID  INTEGER PRIMARY KEY,
P_ID INT,
BILLSTATUS VARCHAR(30),

)
 INSERT INTO BILL VALUES 
 (14,1,'DONE'),
 (15,2,'UNPAID'),
 (16,3,'DONE');
SELECT *FROM BILL

CREATE TABLE ASSIGNED (
P_ID INT PRIMARY KEY,
 R_NO INT NOT NULL ,
 FOREIGN KEY ( P_ID ) REFERENCES PATIENT ON DELETE CASCADE ,
 FOREIGN KEY ( R_NO ) REFERENCES ROOMS ON DELETE CASCADE ,
)
INSERT INTO ASSIGNED VALUES (1,5),
(2,6),
(3,7);
SELECT *FROM ASSIGNED

CREATE TABLE [check](
 D_ID INT ,
 P_ID INT,
 DIAGNOSIS CHAR(20),
 PRIMARY KEY ( D_ID ,P_ID )
 
)


ALTER TABLE [check]
ADD CONSTRAINT FK_check_DOCTOR
FOREIGN KEY (D_ID) REFERENCES DOCTOR(D_ID);

ALTER TABLE [check]
ADD CONSTRAINT FK_check_PATIENT
FOREIGN KEY (P_ID) REFERENCES PATIENT(P_ID);

SELECT *FROM [check]

INSERT INTO [check] VALUES (1,1,'FEVER'),
(2,2,'STOMACH'),
(3,3,'COLD');



